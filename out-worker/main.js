"use strict";
importScripts('perceptron.js');
importScripts('train.js');
importScripts('classify.js');
var Main;
(function (Main) {
    Main.chars = [];
    Main.perceptrons = [];
    onmessage = ({ data }) => {
        switch (data.type) {
            case 'init':
                Main.chars = data.chars;
                Main.perceptrons = Main.chars.map(() => new Perceptron(data.inputCount));
                break;
            case 'train':
                Main.train(data.trainingSets);
                break;
            case 'classify':
                Main.classify(data.image);
                break;
        }
    };
})(Main || (Main = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy13b3JrZXIvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsYUFBYSxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQy9CLGFBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUMxQixhQUFhLENBQUMsYUFBYSxDQUFDLENBQUM7QUFFN0IsSUFBVSxJQUFJLENBb0JiO0FBcEJELFdBQVUsSUFBSTtJQUVDLFVBQUssR0FBRyxFQUFjLENBQUM7SUFDdkIsZ0JBQVcsR0FBRyxFQUFrQixDQUFDO0lBRTVDLFNBQVMsR0FBRyxDQUFDLEVBQUUsSUFBSSxFQUF5QjtRQUN4QyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNoQixLQUFLLE1BQU07Z0JBQ1AsS0FBQSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztnQkFDbkIsS0FBQSxXQUFXLEdBQUcsS0FBQSxLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sSUFBSSxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7Z0JBQy9ELEtBQUssQ0FBQztZQUNWLEtBQUssT0FBTztnQkFDUixLQUFBLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7Z0JBQ3pCLEtBQUssQ0FBQztZQUNWLEtBQUssVUFBVTtnQkFDWCxLQUFBLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ3JCLEtBQUssQ0FBQztRQUNkLENBQUM7SUFDTCxDQUFDLENBQUM7QUFFTixDQUFDLEVBcEJTLElBQUksS0FBSixJQUFJLFFBb0JiIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0U2NyaXB0cygncGVyY2VwdHJvbi5qcycpO1xyXG5pbXBvcnRTY3JpcHRzKCd0cmFpbi5qcycpO1xyXG5pbXBvcnRTY3JpcHRzKCdjbGFzc2lmeS5qcycpO1xyXG5cclxubmFtZXNwYWNlIE1haW4ge1xyXG5cclxuICAgIGV4cG9ydCBsZXQgY2hhcnMgPSBbXSBhcyBzdHJpbmdbXTtcclxuICAgIGV4cG9ydCBsZXQgcGVyY2VwdHJvbnMgPSBbXSBhcyBQZXJjZXB0cm9uW107XHJcblxyXG4gICAgb25tZXNzYWdlID0gKHsgZGF0YSB9OiB7IGRhdGE6IE1haW5NZXNzYWdlIH0pID0+IHtcclxuICAgICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdpbml0JzpcclxuICAgICAgICAgICAgICAgIGNoYXJzID0gZGF0YS5jaGFycztcclxuICAgICAgICAgICAgICAgIHBlcmNlcHRyb25zID0gY2hhcnMubWFwKCgpID0+IG5ldyBQZXJjZXB0cm9uKGRhdGEuaW5wdXRDb3VudCkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3RyYWluJzpcclxuICAgICAgICAgICAgICAgIHRyYWluKGRhdGEudHJhaW5pbmdTZXRzKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdjbGFzc2lmeSc6XHJcbiAgICAgICAgICAgICAgICBjbGFzc2lmeShkYXRhLmltYWdlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG59XHJcbiJdfQ==